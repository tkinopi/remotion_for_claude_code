# キーワードハイライトスキル

テロップ内の重要キーワードを黄色/赤色でハイライトして視覚的変化をつけるスキル。

## 前提

- `src/Telop.tsx` にマークアップパーサーが実装済み
- マークアップ形式: `[yellow:テキスト]` `[red:テキスト]`
- 対応色: `yellow` → `#FFD700`, `red` → `#FF3333`
- 基本スタイル（濃い青 #0a3dba + 白縁取り 5px）は維持される
- 改行(`\n`)との共存OK

## マークアップの書き方

テロップテキスト内にインラインで埋め込む:

```typescript
// 黄色ハイライト（主題キーワード）
{ text: "[yellow:Python]は入口として最強", ... }

// 赤色ハイライト（否定・強調）
{ text: "結局、[red:挫折]して終わりました", ... }

// 複数の色を組み合わせ
{ text: "「[yellow:Python][red:終了]」って言って\n[yellow:Python]を捨てるのは[red:NG]です", ... }
```

## ハイライト対象の選定方針

### 黄色 `[yellow:]` - 主題キーワード
- 動画のメインテーマとなる技術名・概念（例: Python, Rust, Go, C++, AI）
- 対比や強調の文脈で使う
- 全ての出現箇所ではなく、テーゼ（主張）・結論・対比の場面に絞る

### 赤色 `[red:]` - 否定・強調表現
- 失敗・否定を表す語（例: 終了, NG, 終わった, 詰む, 挫折, 地獄）
- インパクトのある数字・事実（例: 半日溶けました, 何も作れなかった）
- 短い強調フレーズ全体（例: `[red:順番が悪い]`）

### 適用密度の目安
- 369セグメントなら30〜40箇所程度（全体の8〜10%）
- 全セグメントに機械的に適用しない
- 以下の場面に集中配置:
  1. **フック**（冒頭のインパクト）
  2. **テーゼ**（メインの主張）
  3. **失敗談**（赤色で共感を引く）
  4. **結論・復習**（まとめの強調）
- 同じキーワードが連続で出る箇所は最初の1回だけハイライト

## 実装手順

### 1. 動画の内容を理解する
- `src/telop-data.ts` を読んで動画全体の構成を把握
- メインテーマ、キーワード、起承転結を特定

### 2. ハイライト箇所を決定
- 上記の選定方針に従い、ハイライトする箇所をリストアップ
- 黄色/赤色の使い分けを決定

### 3. マークアップを追加
- `src/telop-data.ts` の該当セグメントの `text` フィールドにマークアップを埋め込む
- `startFrame` / `endFrame` は変更しない

### 4. 検証
- `npx tsc --noEmit` でコンパイルエラーがないことを確認
- `npx remotion studio` でプレビュー確認（ユーザーに依頼）

## Telop.tsx のパーサー仕様

```typescript
// パーサーは正規表現 /\[(yellow|red):([^\]]+)\]/g でマークアップを検出
// 1. テキストを \n で分割（改行処理）
// 2. 各行内で [color:text] をパースして TextSegment[] に変換
// 3. 色付きセグメントは <span style={{ color }}> でレンダリング
// 4. 色なしセグメントはそのまま表示
```

新しい色を追加する場合は `Telop.tsx` の `COLOR_MAP` にエントリを追加する。

## 注意事項

- マークアップ記号 `[` `]` `:` がテロップテキストに含まれる場合は誤パースに注意
- 「」の内側にマークアップを入れてOK（例: `「[yellow:Python]は終わり」`）
- 改行 `\n` はマークアップの外に置く（`[yellow:テキスト\nテキスト]` はNG、`[yellow:テキスト]\n[yellow:テキスト]` はOK）
